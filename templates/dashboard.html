{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<h2 style="text-align:center; margin-bottom:20px;">Expense Dashboard</h2>

<form method="GET" style="max-width:400px;margin:auto;margin-bottom:20px;">
    <select name="category">
        <option value="">All</option>
        <option value="Food" {% if selected_food %}selected{% endif %}>Food</option>
        <option value="Travel" {% if selected_travel %}selected{% endif %}>Travel</option>
        <option value="Shopping" {% if selected_shopping %}selected{% endif %}>Shopping</option>
        <option value="Rent" {% if selected_rent %}selected{% endif %}>Rent</option>
        <option value="Others" {% if selected_others %}selected{% endif %}>Others</option>
    </select>
    <button type="submit">Filter</button>
</form>

<table>
    <tr>
        <th>#</th>
        <th>Category</th>
        <th>Amount</th>
        <th>Description</th>
        <th>Actions</th>
    </tr>

    {% for expense in expenses %}
    <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ expense.category }}</td>
        <td>₹ {{ expense.amount }}</td>
        <td>{{ expense.description }}</td>
        <td>
            <a class="btn btn-edit" href="{% url 'edit_expense' expense.id %}">Edit</a>
            <a class="btn btn-delete" href="{% url 'delete_expense' expense.id %}" onclick="return confirm('Are you sure?')">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h3 style="text-align:center;margin-top:20px;">Total Expense: ₹ {{ total }}</h3>
{% endblock %}


{% comment %} <select name="category">
        <option value="">All</option>
        <option value="Food" {% if selected_food %}selected{% endif %}>Food</option>
        <option value="Travel" {% if selected_travel %}selected{% endif %}>Travel</option>
        <option value="Shopping" {% if selected_shopping %}selected{% endif %}>Shopping</option>
        <option value="Rent" {% if selected_rent %}selected{% endif %}>Rent</option>
        <option value="Others" {% if selected_others %}selected{% endif %}>Others</option>
    </select> {% endcomment %}